<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Discover FamPay&#x27;s Engagement Service: Missions</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      /* This font-face is here to make icons work if the Ghost instance is installed in a subdirectory */
      @font-face {
        font-family: 'icomoon';
        src: url("/blog/assets/fonts/icomoon.eot?vukg2s?v=22080dfa02");
        src: url("/blog/assets/fonts/icomoon.eot?vukg2s?v=22080dfa02#iefix") format('embedded-opentype'),
        url("/blog/assets/fonts/icomoon.ttf?vukg2s?v=22080dfa02") format('truetype'),
        url("/blog/assets/fonts/icomoon.woff?vukg2s?v=22080dfa02") format('woff'),
        url("/blog/assets/fonts/icomoon.svg?vukg2s?v=22080dfa02#icomoon") format('svg');
        font-weight: normal;
        font-style: normal;
        font-display: swap;
      }
    </style>
    <link rel="stylesheet" type="text/css" href="/blog/assets/css/app.css?v=22080dfa02" media="screen" />

    

    <link rel="icon" href="https://fampay.in/blog/content/images/size/w256h256/2020/11/logofile-06-2.png" type="image/png" />
    <link rel="canonical" href="https://fampay.in/blog/discover-fampays-engagement-service-missions-3/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="https://fampay.in/blog/discover-fampays-engagement-service-missions-3/amp/" />
    
    <meta property="og:site_name" content="UnRead by FamPay" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Discover FamPay&#x27;s Engagement Service: Missions" />
    <meta property="og:description" content="What is engagement and why does it matter?
Engagement plays a pivotal role in ensuring product retention, as it
incentivises users to keep coming back for more. At FamPay, our target audience
consists of GenZs who are typically the CTOs of their households and are known
to have a competitive" />
    <meta property="og:url" content="https://fampay.in/blog/discover-fampays-engagement-service-missions-3/" />
    <meta property="og:image" content="https://blog.fampay.in/content/images/2020/06/FamPay-unread-blog-cover-2-2.jpg" />
    <meta property="article:published_time" content="2023-03-14T13:07:38.000Z" />
    <meta property="article:modified_time" content="2023-03-14T13:07:38.000Z" />
    <meta property="article:tag" content="Tech" />
    
    <meta property="article:publisher" content="https://www.facebook.com/fampay.in" />
    <meta property="article:author" content="https://www.facebook.com/fampay.in/" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Discover FamPay&#x27;s Engagement Service: Missions" />
    <meta name="twitter:description" content="What is engagement and why does it matter?
Engagement plays a pivotal role in ensuring product retention, as it
incentivises users to keep coming back for more. At FamPay, our target audience
consists of GenZs who are typically the CTOs of their households and are known
to have a competitive" />
    <meta name="twitter:url" content="https://fampay.in/blog/discover-fampays-engagement-service-missions-3/" />
    <meta name="twitter:image" content="https://blog.fampay.in/content/images/2020/06/FamPay-unread-blog-cover-2-1.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="FamPay Team" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Tech" />
    <meta name="twitter:site" content="@fampayindia" />
    <meta name="twitter:creator" content="@fampayindia" />
    <meta property="og:image:width" content="2000" />
    <meta property="og:image:height" content="1286" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "UnRead by FamPay",
        "url": "https://fampay.in/blog/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://fampay.in/blog/content/images/2020/11/logofilewhite-11-2.png"
        }
    },
    "author": {
        "@type": "Person",
        "name": "FamPay Team",
        "image": {
            "@type": "ImageObject",
            "url": "https://fampay.in/blog/content/images/2020/11/logo.png",
            "width": 108,
            "height": 98
        },
        "url": "https://fampay.in/blog/author/fampay/",
        "sameAs": [
            "https://fampay.in/",
            "https://www.facebook.com/fampay.in/",
            "https://twitter.com/fampayindia"
        ]
    },
    "headline": "Discover FamPay&#x27;s Engagement Service: Missions",
    "url": "https://fampay.in/blog/discover-fampays-engagement-service-missions-3/",
    "datePublished": "2023-03-14T13:07:38.000Z",
    "dateModified": "2023-03-14T13:07:38.000Z",
    "keywords": "Tech",
    "description": "What is engagement and why does it matter?\nEngagement plays a pivotal role in ensuring product retention, as it\nincentivises users to keep coming back for more. At FamPay, our target audience\nconsists of GenZs who are typically the CTOs of their households and are known\nto have a competitive streak. They’re always looking for the best way possible\nto make payments fun and engaging. Our feature, Missions, achieves this by\nintroducing challenges that require our users to use FamPay&#x27;s services. By\n",
    "mainEntityOfPage": "https://fampay.in/blog/discover-fampays-engagement-service-missions-3/"
}
    </script>

    <meta name="generator" content="Ghost 5.47" />
    <link rel="alternate" type="application/rss+xml" title="UnRead by FamPay" href="https://fampay.in/blog/rss/" />
    <script defer src="https://cdn.jsdelivr.net/ghost/portal@~2.30/umd/portal.min.js" data-i18n="false" data-ghost="https://fampay.in/blog/" data-key="17ef08297f0b6181934a5309a8" data-api="https://fampay.in/blog/ghost/api/content/" crossorigin="anonymous"></script><style id="gh-members-styles">.gh-post-upgrade-cta-content,
.gh-post-upgrade-cta {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    text-align: center;
    width: 100%;
    color: #ffffff;
    font-size: 16px;
}

.gh-post-upgrade-cta-content {
    border-radius: 8px;
    padding: 40px 4vw;
}

.gh-post-upgrade-cta h2 {
    color: #ffffff;
    font-size: 28px;
    letter-spacing: -0.2px;
    margin: 0;
    padding: 0;
}

.gh-post-upgrade-cta p {
    margin: 20px 0 0;
    padding: 0;
}

.gh-post-upgrade-cta small {
    font-size: 16px;
    letter-spacing: -0.2px;
}

.gh-post-upgrade-cta a {
    color: #ffffff;
    cursor: pointer;
    font-weight: 500;
    box-shadow: none;
    text-decoration: underline;
}

.gh-post-upgrade-cta a:hover {
    color: #ffffff;
    opacity: 0.8;
    box-shadow: none;
    text-decoration: underline;
}

.gh-post-upgrade-cta a.gh-btn {
    display: block;
    background: #ffffff;
    text-decoration: none;
    margin: 28px 0 0;
    padding: 8px 18px;
    border-radius: 4px;
    font-size: 16px;
    font-weight: 600;
}

.gh-post-upgrade-cta a.gh-btn:hover {
    opacity: 0.92;
}</style>
    <script defer src="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/sodo-search.min.js" data-key="17ef08297f0b6181934a5309a8" data-styles="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/main.css" data-sodo-search="https://fampay.in/blog/" crossorigin="anonymous"></script>
    
    <link href="https://fampay.in/blog/webmentions/receive/" rel="webmention" />
    <script defer src="/blog/public/cards.min.js?v=22080dfa02"></script>
    <link rel="stylesheet" type="text/css" href="/blog/public/cards.min.css?v=22080dfa02">
    <script defer src="/blog/public/member-attribution.min.js?v=22080dfa02"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-147725948-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-147725948-3');
</script>

<style>
    :root,[data-theme=light] {
        --background-color:#fff;--primary-foreground-color:#4a4a4a;--secondary-foreground-color:#000;--primary-subtle-color:#fbaf03;--secondary-subtle-color:#f4f8fd;--titles-color:#333;--link-color:#293951;--primary-border-color:#9b9b9b;--secondary-border-color:#f0f8ff;--article-shadow-normal:0 10px 10px rgba(0,0,0,0.08);--article-shadow-hover:0 4px 60px 0 rgba(0,0,0,0.2);--transparent-background-color:hsla(0,0%,100%,0.99);--footer-background-color:#293951;--submenu-shadow-color-opacity:0.25;--button-shadow-color-normal:hsla(0,0%,42.4%,0.2);--button-shadow-color-hover:hsla(0,0%,42.4%,0.3);--toggle-darkmode-button-color:#fff;--table-background-color-odd:#fafafa;--table-head-border-bottom:#e2e2e2
    }

	[data-theme=dark] {
    	--background-color:#111;--primary-foreground-color:#ccc;--secondary-foreground-color:#fff;--primary-subtle-color:#fbaf03;--secondary-subtle-color:#141920;--titles-color:#b4b4b4;--link-color:#fbaf03;--primary-border-color:#1d1d1d;--secondary-border-color:#0f0f0f;--article-shadow-normal:0 4px 5px 5px rgba(0,0,0,0.1);--article-shadow-hover:0 4px 5px 10px rgba(0,0,0,0.1);--transparent-background-color:rgba(0,0,0,0.99);--footer-background-color:#080808;--submenu-shadow-color-opacity:0.55;--button-shadow-color-normal:rgba(10,10,10,0.5);--button-shadow-color-hover:rgba(10,10,10,0.5);--toggle-darkmode-button-color:#efd114;--table-background-color-odd:#050505;--table-head-border-bottom:#1d1d1d
    }

	@media (prefers-color-scheme:dark) {
    	:root:not([data-theme=light]) {
        	--background-color:#111;--primary-foreground-color:#ccc;--secondary-foreground-color:#fff;--primary-subtle-color:#fbaf03;--secondary-subtle-color:#141920;--titles-color:#b4b4b4;--link-color:#fbaf03;--primary-border-color:#1d1d1d;--secondary-border-color:#0f0f0f;--article-shadow-normal:0 4px 5px 5px rgba(0,0,0,0.1);--article-shadow-hover:0 4px 5px 10px rgba(0,0,0,0.1);--transparent-background-color:rgba(0,0,0,0.99);--footer-background-color:#080808;--submenu-shadow-color-opacity:0.55;--button-shadow-color-normal:rgba(10,10,10,0.5);--button-shadow-color-hover:rgba(10,10,10,0.5);--toggle-darkmode-button-color:#efd114;--table-background-color-odd:#050505;--table-head-border-bottom:#1d1d1d
        }
	}
</style><style>:root {--ghost-accent-color: #15171A;}</style>

    <script>
      // @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&dn=expat.txt Expat
      const ghostHost = "https://fampay.in/blog"
      // @license-end
    </script>

    <script>
      // @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&dn=expat.txt Expat
      WebFontConfig = {
        google: { families: ['Source+Sans+Pro:400,600,700&display=swap'] }
      };

      (function (d) {
        var wf = d.createElement('script'), s = d.scripts[0];
        wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js';
        wf.async = true;
        s.parentNode.insertBefore(wf, s);
      })(document);
      // @license-end
    </script>
  </head>
  <body class="post-template tag-tech">
    

<div class="main-wrap">
    
<header class="m-header  js-header">
  <div class="m-mobile-topbar" data-aos="fade-down">
    <button class="m-icon-button in-mobile-topbar js-open-menu" aria-label="Open menu">
      <span class="icon-menu"></span>
    </button>
      <a href="https://fampay.in" class="m-logo in-mobile-topbar">
        <img src="https://fampay.in/blog/content/images/2020/11/logofilewhite-11-2.png" alt="UnRead by FamPay">
      </a>
    <button class="m-icon-button in-mobile-topbar js-open-search" aria-label="Open search">
      <span class="icon-search"></span>
    </button>
  </div>

  <div class="m-menu js-menu">
    <button class="m-icon-button outlined as-close-menu js-close-menu" aria-label="Close menu">
      <span class="icon-close"></span>
    </button>
    <div class="m-menu__main" data-aos="fade-down">
      <div class="l-wrapper">
        <div class="m-nav">
          <nav class="m-nav__left">
            <ul role="submenu">
                <li class="only-desktop" role="menuitem">
                  <a href="https://fampay.in" class="m-logo">
                    <img src="https://fampay.in/blog/content/images/2020/11/logofilewhite-11-2.png" alt="UnRead by FamPay">
                  </a>
                </li>
                
    <li class="nav-unread" role="menuitem">
      <a href="https://fampay.in/blog/">Unread</a>
    </li>
    <li class="nav-teens" role="menuitem">
      <a href="https://fampay.in/blog/tag/teens/">Teens</a>
    </li>
    <li class="nav-parents" role="menuitem">
      <a href="https://fampay.in/blog/tag/parents/">Parents</a>
    </li>
    <li class="nav-news" role="menuitem">
      <a href="https://fampay.in/blog/tag/news/">News</a>
    </li>
    <li class="nav-famsays" role="menuitem">
      <a href="https://fampay.in/blog/tag/famsays/">FamSays</a>
    </li>

              <li role="menuitem" class="js-submenu-option">
                <button class="m-icon-button in-menu-main more js-toggle-submenu" aria-label="Toggle submenu">
                  <span class="icon-more"></span>
                </button>
                <div class="m-submenu js-submenu">
                  <div class="l-wrapper in-submenu">
                    <!-- <section class="m-recent-articles">
                      <h3 class="m-submenu-title in-recent-articles">Recent articles</h3>
                      <div class="js-recent-articles">
                            <div>
                              <a href="/blog/how-to-clean-up-your-android-apps-dependencies-the-ultimate-guide-2/" class="m-recent-article">
                                <div class="m-recent-article__picture">
                                    <div class="no-image lozad" data-background-image="/blog/assets/images/no-image.png?v=22080dfa02"></div>
                                </div>
                                <h3 class="m-recent-article__title js-recent-article-title" title="How to Clean Up Your Android App&#x27;s Dependencies: The Ultimate Guide">
                                  How to Clean Up Your Android App&#x27;s Dependencies: The Ultimate Guide
                                </h3>
                                <span class="m-recent-article__date">3 months ago</span>
                              </a>
                            </div>
                            <div>
                              <a href="/blog/discover-fampays-engagement-service-missions-3/" class="m-recent-article">
                                <div class="m-recent-article__picture">
                                    <div class="no-image lozad" data-background-image="/blog/assets/images/no-image.png?v=22080dfa02"></div>
                                </div>
                                <h3 class="m-recent-article__title js-recent-article-title" title="Discover FamPay&#x27;s Engagement Service: Missions">
                                  Discover FamPay&#x27;s Engagement Service: Missions
                                </h3>
                                <span class="m-recent-article__date">3 months ago</span>
                              </a>
                            </div>
                            <div>
                              <a href="/blog/implementing-an-in-memory-queue/" class="m-recent-article">
                                <div class="m-recent-article__picture">
                                    <div class="lozad" data-background-image="/blog/content/images/size/w300/2022/11/Group-2179.png"></div>
                                </div>
                                <h3 class="m-recent-article__title js-recent-article-title" title="Implementing an In-memory Queue 🧑‍💻">
                                  Implementing an In-memory Queue 🧑‍💻
                                </h3>
                                <span class="m-recent-article__date">7 months ago</span>
                              </a>
                            </div>
                            <div>
                              <a href="/blog/covid-19-vaccination-as-a-teen-a-guide/" class="m-recent-article">
                                <div class="m-recent-article__picture">
                                    <div class="lozad" data-background-image="/blog/content/images/size/w300/2022/02/Blog-template-1.png"></div>
                                </div>
                                <h3 class="m-recent-article__title js-recent-article-title" title="Covid-19 Vaccination for teens, a step-by-step guide💉">
                                  Covid-19 Vaccination for teens, a step-by-step guide💉
                                </h3>
                                <span class="m-recent-article__date">a year ago</span>
                              </a>
                            </div>
                      </div>
                    </section> -->
                    <section class="m-tags">
                      <h3 class="m-submenu-title">Tags</h3>
                        <ul>
                            <li>
                              <a href="/blog/tag/community/">Community</a>
                            </li>
                            <li>
                              <a href="/blog/tag/culture/">Culture</a>
                            </li>
                            <li>
                              <a href="/blog/tag/famsays/">FamSays</a>
                            </li>
                            <li>
                              <a href="/blog/tag/growth/">Growth</a>
                            </li>
                            <li>
                              <a href="/blog/tag/lifestyle/">Lifestyle</a>
                            </li>
                            <li>
                              <a href="/blog/tag/news/">News</a>
                            </li>
                            <li>
                              <a href="/blog/tag/parents/">Parents</a>
                            </li>
                            <li>
                              <a href="/blog/tag/pr-news/">Press Release</a>
                            </li>
                            <li>
                              <a href="/blog/tag/product/">Product</a>
                            </li>
                            <li>
                              <a href="/blog/tag/tech/">Tech</a>
                            </li>
                        </ul>
                    </section>
                  </div>
                </div>
              </li>
            </ul>
          </nav>
          <div class="m-nav__right">
            <button class="m-icon-button in-menu-main js-open-search" aria-label="Open search">
              <span class="icon-search"></span>
            </button>
            <!-- <div class="m-toggle-darkmode js-tooltip" data-tippy-content="Toggle dark mode">
              <input type="checkbox" class="js-toggle-darkmode">
              <div></div>
            </div> -->
          </div>
        </div>
      </div>
    </div>
  </div>

</header>
    
  <section class="m-hero no-picture in-post" data-aos="fade">
    </section>
  
  <main>
    <article>
      <div class="l-content in-post">
          <div class="l-wrapper in-post no-image js-aos-wrapper" data-aos="fade-up" data-aos-delay="300">
            <div class="l-post-content  has-subscribe-form js-progress-content">
              <header class="m-heading">
                <h1 class="m-heading__title in-post">Discover FamPay&#x27;s Engagement Service: Missions</h1>
                <div class="m-heading__meta">
                    <a href="https://fampay.in/blog/tag/tech/" class="m-heading__meta__tag">Tech</a>
                    <span class="m-heading__meta__divider">&bull;</span>
                  <span class="m-heading__meta__time">Mar 14, 2023</span>
                </div>
              </header>
              <div class="pos-relative js-post-content">
                <div class="m-share">
                  <div class="m-share__content js-sticky">
                    <!-- <a href="https://www.instagram.com/?url=https://fampay.in/blog/discover-fampays-engagement-service-missions-3/" class="m-icon-button filled in-share" target="_blank" rel="noopener" aria-label="Instagram">
                      <span class="icon-instagram"></span>
                    </a> -->
                    <a onclick="navigator.share({title: 'UnRead by FamPay',text: 'Discover FamPay&#x27;s Engagement Service: Missions',url: 'https://fampay.in/blog/discover-fampays-engagement-service-missions-3/'});" class="m-icon-button filled in-share" target="_blank" rel="noopener" aria-label="Share">
                      <span class="icon-flickr"></span>
                    </a>
                    <a href="https://wa.me/?text=Discover%20FamPay's%20Engagement%20Service%3A%20Missions%20https://fampay.in/blog/discover-fampays-engagement-service-missions-3/" class="m-icon-button filled in-share" target="_blank" rel="noopener" aria-label="Whatsapp">
                      <span class="icon-whatsapp"></span>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://fampay.in/blog/discover-fampays-engagement-service-missions-3/" class="m-icon-button filled in-share" target="_blank" rel="noopener" aria-label="Facebook">
                      <span class="icon-facebook"></span>
                    </a>
                    <a href="https://twitter.com/intent/tweet?text=Discover%20FamPay's%20Engagement%20Service%3A%20Missions&url=https://fampay.in/blog/discover-fampays-engagement-service-missions-3/" class="m-icon-button filled in-share" target="_blank" rel="noopener" aria-label="Twitter">
                      <span class="icon-twitter"></span>
                    </a>
                    <button class="m-icon-button filled in-share progress js-scrolltop" aria-label="Scroll to top">
                      <span class="icon-arrow-top"></span>
                      <svg>
                        <circle class="progress-ring__circle js-progress" fill="transparent" r="0" />
                      </svg>
                    </button>
                  </div>
                </div>
                <h3 id="what-is-engagement-and-why-does-it-matter"><strong>What is engagement and why does it matter?</strong></h3><p>Engagement plays a pivotal role in ensuring product retention, as it incentivises users to keep coming back for more. At FamPay, our target audience consists of GenZs who are typically the CTOs of their households and are known to have a competitive streak. They’re always looking for the best way possible to make payments fun and engaging. Our feature, Missions, achieves this by introducing challenges that require our users to use FamPay's services. By completing these missions, users are rewarded in numerous ways - with FamCoins, monetary rewards, gift cards, and other incentives.</p><h3 id="what-do-missions-look-like"><strong>What do Missions look like?</strong></h3><blockquote>Spend X amount using FamCard in Y duration and win Rs Z</blockquote><p>Completing a mission on FamPay involves spending a specified amount on any of our services or a third-party platform using FamPay as the payment method within a certain timeframe to earn a reward. Sounds easy? It would be if we were handling just one case. However, making this feature modular for the product team to customise, and scalable to handle millions of transactions while maintaining external dependencies and a seamless user experience presents significant engineering challenges. These complexities are further compounded by FamPlay, the underlying engagement service, which requires modification and integration to avoid any negative impact on user flow, making it even more challenging for our engineers.</p><p>In this blog post, we will break down how this engagement service at FamPay is built.</p><h3 id="the-core-workings">The core workings</h3><p>We’ll begin by providing an overview of the entire service. Afterwards, we'll analyse its individual components in detail.</p><figure class="kg-card kg-image-card"><img src="https://cdn-images-1.medium.com/max/1600/1*IF2BJcwp7VgrlMgK1TEaGw.png" class="kg-image" alt="https://cdn-images-1.medium.com/max/1600/1*IF2BJcwp7VgrlMgK1TEaGw.png" loading="lazy"></figure><p>Architecture for the engagement service — Missions</p><p>By looking at the architecture, we can divide the service into these main components:</p><ul><li>User-Facing APIs</li><li>Internal panel APIs</li><li>Event stream handler</li><li>Task scheduler and worker</li></ul><p><strong>User-facing APIs</strong></p><p>User-facing APIs allow direct user interaction with the system, including data retrieval and challenge progress tracking. These APIs are secured by our <em>Auth Service,</em> which ensures that all the requests that reach the server are legitimate and no malicious users can access the system.</p><p>Building these APIs was relatively straightforward, given that the data and processing required for fetching user data is comparatively simple.</p><p>They include APIs like fetching user progress, reward status, mission details, etc.</p><p><strong>Internal Panel APIs</strong>The APIs enable the product team to manage Missions with basic CRUD operations. However, ensuring that the backend data schema can handle a diverse range of filters with minimal overhead while creating and filtering Missions was the challenging part. Here's a sample of some Mission filters that we need to support.</p><pre><code class="language-jsx">[{
  id:"amount",
  operator:"gte",
  values: 100
},{
  id:"merchant",
  operator:"eq",
  values: 'swiggy'
}]
</code></pre><p>The filters can be multiple or single, and are stored in an array format and follow the <em>AND</em> rule, meaning all filters must be valid for the transaction to be counted as valid. For example, a filter may check if the transaction value is greater than or equal to 100, if not, it fails, and if so, it proceeds to check if the merchant is Swiggy. Only if both are true, it updates the Mission progress. There are additional processes involved in marking Missions as successful for a user, but that's beyond the scope of this blog.</p><p>Other internal APIs include creation of rewards, handling ads, managing brands, and more.</p><p><strong>Event stream handler</strong>At FamPay, our backend is composed of microservices that utilise <a href="https://kafka.apache.org/?ref=fampay.in">Kafka</a> as our primary inter-service communication tool. While event stream handling and task scheduling are closely related, we'll cover each topic separately to provide a more comprehensive understanding.</p><p>In FamPay's backend architecture, the event relay service acts as the connection hub between services, ensuring data integrity at all times. Meanwhile, the event stream handler, which is implemented in the engagement service, maintains a ledger of all processed events and performs pre-processing to guarantee that data is consistently in the correct format. To illustrate, our primary transaction service emits events for various monetary transactions, and it's the handler's responsibility to inform the scheduler of the event type (e.g., payment, reversal) in order to create and schedule relevant tasks. Additionally, the event stream handler safeguards the service from malicious events.</p><p>The reason for handling reversals is to ensure that malicious users don’t take advantage of the feature by reversing their transactions with our partners while still obtaining the rewards.</p><figure class="kg-card kg-image-card"><img src="https://cdn-images-1.medium.com/max/1600/1*HWGQo6SxVar42uyJYNq8DA.png" class="kg-image" alt="https://cdn-images-1.medium.com/max/1600/1*HWGQo6SxVar42uyJYNq8DA.png" loading="lazy"></figure><p>Task scheduling</p><h3 id="task-scheduler-and-worker">Task scheduler and worker</h3><p>In order to manage the daily event load and scaling requirements of our applications, we've created several internal libraries tailored for event handling. These libraries include:</p><ol><li>Nimble</li><li>Mammoth</li></ol><p>Let’s dive deeper.</p><p><strong>Nimble</strong></p><p>Nimble is FamPay's custom-built task scheduler and runner, utilising <a href="https://redis.com/?ref=fampay.in">Redis</a> and <a href="https://docs.bullmq.io/?ref=fampay.in">bullMQ</a> as its foundation. Our Nimble implementation is optimised for handling micro tasks that require low latency and fast task switching. While bullMQ offers a wide range of task scheduler features, we chose to implement Nimble to provide custom error handling and unique functions. Nimble's task queue works efficiently in-memory and handles sequential tasks that need to be executed, such as real-time score updates, transaction checks, and notification sending for a single event and record.</p><p><strong>Mammoth</strong></p><p>Mammoth is a powerful library designed to handle heavy operations that require significant processing power. It excels in processing tasks that involve bulk data processing, where multiple records that require similar processing can be batched together in a single task. These tasks are then scheduled at specific intervals, optimising resource utilisation and ensuring efficient processing of events. This library is built on top of <a href="https://www.npmjs.com/package/agenda?ref=fampay.in">Agenda</a>, which uses a database internally. Since these tasks are not latency-sensitive, they can be queried from the database without causing any significant delays or compromising the SLA. These tasks include processing rewards, updating the status of missions and challenges, and other similar operations that require considerable processing power.</p><p>While Agenda and BullMQ provide most of the out-of-the-box features, we needed certain features to handle our custom logic like:</p><ul><li>Data persistence : This is crucial in some tasks, while in others, it may not be necessary. To achieve fine-grained control over which data should be persisted and which should not, it is important to implement custom logic.</li><li>Retries : Although both Bull and Agenda offer built-in retry mechanisms, it's crucial to have control over the number of retries each task should receive.</li><li>Exponential backoff :  When a task fails, it's often due to the unavailability of the variables it needs for processing, which may become available after a few seconds. This delay in data availability can be addressed through a technique known as exponential backoff. Unfortunately, this feature is not currently available in the open-source versions of Bull or Agenda.</li></ul><figure class="kg-card kg-image-card"><img src="https://cdn-images-1.medium.com/max/1600/0*LACp9O5RmL6O2Qsa.png" class="kg-image" alt="https://cdn-images-1.medium.com/max/1600/0*LACp9O5RmL6O2Qsa.png" loading="lazy"></figure><p><strong>Exponential backoff</strong></p><p>By combining exponential backoff with a custom number of retries, developers can achieve precise control over the tasks they create and schedule using these libraries.</p><p>The task scheduler and runner operate on a separate server, known as the worker server, from the original API server. We have optimised the worker servers to handle more than a million events per hour, ensuring that the system can efficiently handle a high volume of tasks.</p><p>The engagement service is now live for users to use and explore. It can be found in the rewards section within our app or on the home screen. We're currently rolling it out to users in batches, so if you don't see it yet, please be patient as we're working to make it available to everyone as soon as possible. With this new service, you can expect a variety of rewards and benefits, so stay tuned for more exciting updates.</p><figure class="kg-card kg-image-card"><img src="https://cdn-images-1.medium.com/max/1600/0*UG6fCQayvxpZJixr.gif" class="kg-image" alt="https://cdn-images-1.medium.com/max/1600/0*UG6fCQayvxpZJixr.gif" loading="lazy"></figure><p><em>To learn more about Engineering at FamPay, check out our Tech blog and our <u>f<a href="https://fampay.in/?ref=fampay.in">a</a></u><a href="https://fampay.in/?ref=fampay.in">mpay.in</a> site. If you’d like to help us bring ambitious ideas to life, explore our <a href="https://fampay.in/careers?ref=fampay.in">Careers</a> page.</em><br><br>Written by Jugal Bhatt</p>
              </div>
            </div>
          </div>
            <section class="m-subscribe-section">
              <div class="l-wrapper in-post">
                <div class="m-subscribe-section__content">
                  <div class="m-subscribe-section__text">
                    <h4 class="m-subscribe-section__title">Subscribe to our newsletter</h4>
                    <p class="m-subscribe-section__description">
                      Get the latest posts delivered right to your inbox.
                    </p>
                  </div>
                  <div class="m-subscribe-section__form">
                    
<div class="m-subscribe-section__form">
  <form data-members-form="subscribe" id="newsletter-form" class="m-subscribe-section__container">
    <div class="m-subscribe__form">
      <fieldset>
        <label for="newsletter_input" class="sr-only">Your email address</label>
        <input data-members-email id="newsletter-input" class="m-input in-subscribe-section" type="email"
          placeholder="Your email address" required />
      </fieldset>
      <button id="newsletter_button" class="m-button primary block" type="submit">Subscribe</button>
    </div>
    <div class="m-subscribe__success">
      <header class="m-heading no-margin">
        <img src="/blog/assets/images/success.png?v=22080dfa02" alt="Success!" class="m-subscribe__success_icon">
        <p class="m-heading__description in-newsletter-form">
          Now check your inbox and click the link to confirm your subscription.
        </p>
      </header>
    </div>
    <p class="m-subscribe__invalid m-small-text">
      Please enter a valid email address
    </p>
    <p class="m-subscribe__error m-small-text">
      Oops! There was an error sending the email, please try later.
    </p>
  </form>
</div>
                  </div>
                </div>
              </div>
            </section>
          <section class="m-author">
            <div class="m-author__content">
              <div class="m-author__picture">
                <a href="https://fampay.in/blog/author/fampay/" class="m-author-picture" aria-label="Author picture">
                    <div style="background-image: url(https://fampay.in/blog/content/images/2020/11/logo.png);"></div>
                </a>
              </div>
              <div class="m-author__info">
                <h4 class="m-author__name">
                  <a href="https://fampay.in/blog/author/fampay/">FamPay Team</a>
                </h4>
                <ul class="m-author-links">
                    <li>
                      <a href="https://fampay.in/" target="_blank" rel="noopener" aria-label="Website">
                        <span class="icon-globe"></span>
                      </a>
                    </li>
                    <li>
                      <a href="https://facebook.com/fampay.in/" target="_blank" rel="noopener" aria-label="Facebook">
                        <span class="icon-facebook"></span>
                      </a>
                    </li>
                    <li>
                      <a href="https://twitter.com/@fampayindia" target="_blank" rel="noopener" aria-label="Twitter">
                        <span class="icon-twitter"></span>
                      </a>
                    </li>
                </ul>
              </div>
            </div>
          </section>
          <section class="m-recommended">
            <div class="l-wrapper in-recommended">
              <h3 class="m-section-title in-recommended">Recommended for you</h3>
              <div class="m-recommended-articles">
                <div class="m-recommended-slider js-recommended-articles">
                  
    <div class="m-recommended-slider__item">
    <article class="m-article-card post tag-culture tag-famsays tag-tech tag-community tag-growth">
      <div class="m-article-card__picture lozad" data-background-image="/blog/content/images/size/w600/2020/12/Ayushi---blog.png">
      <a href="/blog/life-of-an-intern-is-love/" class="m-article-card__picture-link" aria-label="Article"></a>
      <a href="https://fampay.in/blog/author/ayushi/" class="m-article-card__author js-tooltip" aria-label="Authors" data-tippy-content="Posted by AYUSHI MAHENDRA ">
          <div style="background-image: url(/blog/assets/images/default-avatar-square-small.jpg?v=22080dfa02);"></div>
      </a>
    </div>
      <div class="m-article-card__info">
        <a href="https://fampay.in/blog/tag/culture/" class="m-article-card__tag">Culture</a>
      <a href="/blog/life-of-an-intern-is-love/" class="m-article-card__info-link">
        <div>
          <h2 class="m-article-card__title js-article-card-title " title="Life of an Intern is Love 😍">
            Life of an Intern is Love 😍
          </h2>
        </div>
        <div class="m-article-card__timestamp">
          <span>3 years ago</span>
          <span>&bull;</span>
          <span>10 min read</span>
        </div>
      </a>
    </div>
  </article>
    </div>
    <div class="m-recommended-slider__item">
    <article class="m-article-card post tag-tech tag-famsays tag-product">
      <div class="m-article-card__picture lozad" data-background-image="/blog/content/images/size/w600/2022/11/Group-2179.png">
      <a href="/blog/implementing-an-in-memory-queue/" class="m-article-card__picture-link" aria-label="Article"></a>
      <a href="https://fampay.in/blog/author/fampay/" class="m-article-card__author js-tooltip" aria-label="Authors" data-tippy-content="Posted by FamPay Team ">
          <div style="background-image: url(/blog/content/images/size/w100/2020/11/logo.png);"></div>
      </a>
    </div>
      <div class="m-article-card__info">
        <a href="https://fampay.in/blog/tag/tech/" class="m-article-card__tag">Tech</a>
      <a href="/blog/implementing-an-in-memory-queue/" class="m-article-card__info-link">
        <div>
          <h2 class="m-article-card__title js-article-card-title " title="Implementing an In-memory Queue 🧑‍💻">
            Implementing an In-memory Queue 🧑‍💻
          </h2>
        </div>
        <div class="m-article-card__timestamp">
          <span>7 months ago</span>
          <span>&bull;</span>
          <span>6 min read</span>
        </div>
      </a>
    </div>
  </article>
    </div>
    <div class="m-recommended-slider__item">
    <article class="m-article-card post tag-teenpreneurs tag-teens tag-tech">
      <div class="m-article-card__picture lozad" data-background-image="/blog/content/images/size/w600/2020/06/Frame-584.png">
      <a href="/blog/how-a-pressing-problem-can-lead-to-technological-innovation/" class="m-article-card__picture-link" aria-label="Article"></a>
      <a href="https://fampay.in/blog/author/shiv/" class="m-article-card__author js-tooltip" aria-label="Authors" data-tippy-content="Posted by Shiv Kampani ">
          <div style="background-image: url(/blog/content/images/size/w100/2020/06/shiv.JPG);"></div>
      </a>
    </div>
      <div class="m-article-card__info">
        <a href="https://fampay.in/blog/tag/teenpreneurs/" class="m-article-card__tag">Teenpreneurs</a>
      <a href="/blog/how-a-pressing-problem-can-lead-to-technological-innovation/" class="m-article-card__info-link">
        <div>
          <h2 class="m-article-card__title js-article-card-title " title="How a Pressing Problem can lead to Technological Innovation">
            How a Pressing Problem can lead to Technological Innovation
          </h2>
        </div>
        <div class="m-article-card__timestamp">
          <span>4 years ago</span>
          <span>&bull;</span>
          <span>4 min read</span>
        </div>
      </a>
    </div>
  </article>
    </div>
                </div>
              </div>
            </div>
          </section>
      </div>
    </article>
  </main>
</div>



    
<div class="m-search js-search">
  <button class="m-icon-button outlined as-close-search js-close-search" aria-label="Close search">
    <span class="icon-close"></span>
  </button>
  <div class="m-search__content">
    <form class="m-search__form">
      <fieldset>
        <span class="icon-search m-search-icon"></span>
        <input type="text" class="m-input in-search js-input-search" placeholder="Type to search" aria-label="Type to search">
      </fieldset>
    </form>
    <div class="js-search-results hide"></div>
    <p class="m-not-found align-center hide js-no-results">
      No results for your search, please try with something else.
    </p>
  </div>
</div>

    
<footer class="m-footer">
  <div class="m-footer__content">
    <p class="m-footer-copyright">
      <span>UnRead by FamPay &copy; 2023</span>
      <!-- <span>&nbsp; &bull; &nbsp;</span> -->
      <!-- <span>Published with <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a></span> -->
    </p>

    <nav class="m-footer-social">
      <a href="https://www.instagram.com/fampay.in/" target="_blank" rel="noopener" aria-label="Instagram">
        <span class="icon-instagram"></span>
      </a>
        <a href="https://www.facebook.com/fampay.in" target="_blank" rel="noopener" aria-label="Facebook">
          <span class="icon-facebook"></span>
        </a>
      <a href="https://www.linkedin.com/company/fampay/" target="_blank" rel="noopener" aria-label="LinkedIn">
        <span class="icon-linkedin"></span>
      </a>
        <a href="https://twitter.com/fampayindia" target="_blank" rel="noopener" aria-label="Twitter">
          <span class="icon-twitter"></span>
        </a>
      
    </nav>
    <!-- <p class="m-footer-copyright jslicense">
      <a href="/blog/assets/html/javascript.html?v=22080dfa02" rel="jslicense">JavaScript license information</a>
    </p> -->
  </div>
</footer>

    <div class="m-alert success subscribe js-alert" data-notification="subscribe">
  Great! You&#x27;ve successfully subscribed.
  <button class="m-alert__close js-notification-close" aria-label="Close">
    <span class="icon-close"></span>
  </button>
</div>

<div class="m-alert success signup js-alert" data-notification="signup">
  Great! Next, complete checkout for full access.
  <button class="m-alert__close js-notification-close" aria-label="Close">
    <span class="icon-close"></span>
  </button>
</div>

<div class="m-alert success signin js-alert" data-notification="signin">
  Welcome back! You&#x27;ve successfully signed in.
  <button class="m-alert__close js-notification-close" aria-label="Close">
    <span class="icon-close"></span>
  </button>
</div>

<div class="m-alert success checkout js-alert" data-notification="checkout">
  Success! Your account is fully activated, you now have access to all content.
  <button class="m-alert__close js-notification-close" aria-label="Close">
    <span class="icon-close"></span>
  </button>
</div>
    <script crossorigin="anonymous" src="https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver%2CPromise%2CArray.prototype.includes%2CString.prototype.endsWith%2CString.prototype.startsWith%2CObject.assign%2CNodeList.prototype.forEach"></script>
    <script defer src="/blog/assets/js/vendor/content-api.min.js?v=22080dfa02"></script>
    <script defer src="/blog/assets/js/manifest.js?v=22080dfa02"></script>
    <script defer src="/blog/assets/js/vendor.js?v=22080dfa02"></script>
    <script defer src="/blog/assets/js/app.js?v=22080dfa02"></script>

      <script defer src="/blog/assets/js/post.js?v=22080dfa02"></script>


    <!--
<script>
  function initFreshChat() {
    window.fcWidget.init({
      token: "9a9a4163-c843-4a45-ba7b-5e64f1310af4",
      host: "https://wchat.in.freshchat.com"
    });
  }
  function initialize(i,t){var e;i.getElementById(t)?initFreshChat():((e=i.createElement("script")).id=t,e.async=!0,e.src="https://wchat.in.freshchat.com/js/widget.js",e.onload=initFreshChat,i.head.appendChild(e))}function initiateCall(){initialize(document,"freshchat-js-sdk")}window.addEventListener?window.addEventListener("load",initiateCall,!1):window.attachEvent("load",initiateCall,!1);
</script>
-->

<!--     <script>
      var APP_ID = 'ubqs56wi'
      window.intercomSettings = {
        app_id: APP_ID
      }
      ;(function () {
        var w = window
        var ic = w.Intercom
        if (typeof ic === 'function') {
          ic('reattach_activator')
          ic('update', w.intercomSettings)
        } else {
          var d = document
          var i = function () {
            i.c(arguments)
          }
          i.q = []
          i.c = function (args) {
            i.q.push(args)
          }
          w.Intercom = i
          var l = function () {
            var s = d.createElement('script')
            s.type = 'text/javascript'
            s.async = true
            s.src = 'https://widget.intercom.io/widget/' + APP_ID
            var x = d.getElementsByTagName('script')[0]
            x.parentNode.insertBefore(s, x)
          }
          if (document.readyState === 'complete') {
            l()
          } else if (w.attachEvent) {
            w.attachEvent('onload', l)
          } else {
            w.addEventListener('load', l, false)
          }
        }
      })()
    </script> -->
  </body>
</html>
